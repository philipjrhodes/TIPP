CXX = mpic++
EXE = TIPP
BUILD_DIR = ./build

SRC = $(wildcard *.cpp) $(wildcard **/*.cpp)
#OBJ = $(patsubst %.cpp, $(BUILD_DIR)/%.o, $(SRC))
OBJ = $($(BUILD_DIR)/%.o)
#CXXFLAGS = -std=gnu++11 -Wall -pg
CXXFLAGS = -std=gnu++11 -O3
all: $(EXE)

#$(EXE): $(BUILD_DIR)/*.o
#	$(CXX) $(CXXFLAGS) -o $@ $^

$(EXE): $(BUILD_DIR)/delaunay2DMain.o $(BUILD_DIR)/delaunayMPI.o $(BUILD_DIR)/domain.o $(BUILD_DIR)/partition.o $(BUILD_DIR)/triangle.o $(BUILD_DIR)/boundingBox.o $(BUILD_DIR)/gridBound.o $(BUILD_DIR)/gridElement.o $(BUILD_DIR)/linkList.o $(BUILD_DIR)/edge.o $(BUILD_DIR)/common.o $(BUILD_DIR)/point.o
	$(CXX) $(CXXFLAGS) -o $@ $^

$(BUILD_DIR)/delaunay2DMain.o: delaunay2DMain.cpp
	$(CXX) -c -o $@ $< $(CXXFLAGS)

$(BUILD_DIR)/delaunayMPI.o: delaunayMPI.cpp
	$(CXX) -c -o $@ $< $(CXXFLAGS) 

$(BUILD_DIR)/domain.o: domain.cpp
	$(CXX) $(CXXFLAGS) -o $@ -c $<

$(BUILD_DIR)/partition.o: partition.cpp
	$(CXX) $(CXXFLAGS) -o $@ -c $<

$(BUILD_DIR)/triangle.o: triangle.cpp
	$(CXX) $(CXXFLAGS) -o $@ -c $<

$(BUILD_DIR)/boundingBox.o: boundingBox.cpp
	$(CXX) $(CXXFLAGS) -o $@ -c $<

$(BUILD_DIR)/gridBound.o: gridBound.cpp
	$(CXX) $(CXXFLAGS) -o $@ -c $<

$(BUILD_DIR)/gridElement.o: gridElement.cpp
	$(CXX) $(CXXFLAGS) -o $@ -c $<

$(BUILD_DIR)/edge.o: edge.cpp
	$(CXX) $(CXXFLAGS) -o $@ -c $<

$(BUILD_DIR)/linkList.o: linkList.cpp
	$(CXX) $(CXXFLAGS) -o $@ -c $<

$(BUILD_DIR)/common.o: common.cpp
	$(CXX) $(CXXFLAGS) -o $@ -c $<

$(BUILD_DIR)/point.o: point.cpp
	$(CXX) $(CXXFLAGS) -o $@ -c $<

dir:
	mkdir -p $(BUILD_DIR)

clean:
	rm -rf $(EXE) $(BUILD_DIR)/*o


#	mpic++ -o build/delaunay2DMain.o -c  delaunay2DMain.cpp
#	mpic++ -o build/delaunayMPI.o -c  delaunayMPI.cpp
#	mpic++ -o build/domain.o -c  domain.cpp
#	mpic++ -o build/coarsePartition.o -c  coarsePartition.cpp
#mpic++ -o build/coarsePartition.o -c  coarsePartition.cpp

#mpic++ -std=gnu++11 linkList.cpp common.cpp point.cpp edge.cpp triangle.cpp gridElement.cpp gridBound.cpp boundingBox.cpp partition.cpp domain.cpp delaunayMPI.cpp coarsePartition.cpp delaunay2DMain.cpp -o delaunay2DMain
